<?php
namespace JetApplication\Installer;

use Jet\Form;
use Jet\Mailing;
use Jet\Mvc_Base;
use Jet\Mvc_View;
use Jet\Tr;
use Jet\UI;

/**
 * @var Mvc_View $this
 * @var Form $form
 */


$form = $this->getRaw( 'form' );
$form->setDefaultLabelWidth( [Form::LJ_SIZE_MEDIUM => 1] );
$config = Mailing::getConfig();
?>
<h3><?= Tr::_( 'Set the mail sender' ) ?></h3>
<?= $form->start() ?>

<?php foreach( Mvc_Base::getAllBases() as $base ): ?>

	<fieldset>
		<legend><?= $base->getName() ?></legend>

		<?php foreach( $base->getLocales() as $locale ):
			$key = $config->getSenderKey( $locale, $base->getId(), '' );
			?>
			<fieldset style="padding-left: 60px;">
				<legend><?= UI::flag( $locale ) ?> <?= $locale->getName(); ?></legend>

				<?= $form->field( '/senders/' . $key . '/email' ) ?>
				<?= $form->field( '/senders/' . $key . '/name' ) ?>
			</fieldset>
		<?php endforeach; ?>
	</fieldset>
<?php endforeach; ?>

<?= Installer::buttonNext() ?>

<?= $form->end() ?>
