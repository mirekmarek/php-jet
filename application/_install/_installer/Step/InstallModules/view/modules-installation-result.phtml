<?php
use Jet\Mvc_View;
use Jet\Tr;
use Jet\Application_Modules_Module_Manifest;
/**
 * @var Mvc_View $this
 */

/**
 * @var Application_Modules_Module_Manifest[] $modules
 */
$modules = $this->getRaw('modules');
$result = $this->getRaw('result');

$OK = $this->getBool('OK');
?>

<table class="table table-striped">
	<thead>
	<tr>
		<th><?=Tr::_('Module');?></th>
		<th><?=Tr::_('Result');?></th>
	</tr>
	</thead>
	<?php foreach( $modules as $name=>$info ):
		if(!isset($result[$name])) {
			continue;
		}

		$state = $result[$name];
	?>
	<tr>
		<td>
			<label for="module_<?=$info->getName();?>"><?=$info->getLabel();?></label>
			<br/>
			<div style="font-size: 11px;"><?=$info->getName();?></div>

		</td>
		<td>
			<?php if($state===true): ?>
			<div class="OK">OK</div>
			<?php else: ?>
			<div class="error"><?=$state;?></div>
			<?php endif; ?>

		</td>

	</tr>
	<?php endforeach; ?>
</table>

<?php if($OK): ?>
<form method="post">
	<input type="hidden" name="go" value="1">
	<?=\Jet\Installer::buttonNext();?>
</form>
<?php endif; ?>

<?php if(!$OK): ?>
	<?=\Jet\Installer::buttonBack()?>
<?php endif; ?>
