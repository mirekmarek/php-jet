<?php
use Jet\Form;
use Jet\Mvc_View;
use Jet\Tr;
use Jet\UI;

/**
 * @var Mvc_View $this
 * @var Form     $form
 */
$form = $this->getRaw( 'form' );

$form->setAction('#'.$form->getId());
?>

<h2><?=Tr::_('Form test - generated by DataModel')?></h2>
<p>
	<?php
	echo $form->start();
	echo $form->message();
	foreach( $form->getFields() as $field ) {
		echo $field;
	}
	echo UI::button_save(Tr::_('Submit'));
	echo $form->end();
	?>

	<?php if( $this->varExists( 'form_data' ) ): ?>
	<table>
		<?php foreach( $form->getValues() as $k => $v ): ?>
			<tr>
				<td><?=$k;?>:</td>
				<td><?=is_array( $v ) ? implode( ',', $v ) : $v;?></td>
			</tr>
		<?php endforeach; ?>
	</table>
	<?php endif; ?>

</p>
