<?php
use JetApplicationModule\JetExample\UIElements\DataGrid;
use Jet\Mvc_Controller_Router;
use Jet\Auth_User_Interface;
use Jet\Tr;

/**
 * @var DataGrid $grid
 */
$grid = $this->grid;

/**
 * @var Mvc_Controller_Router $router
 */
$router = $this->router;

$c_edit = $grid->getColumn('_edit_');
$c_edit->setDisplayCallback( function( Auth_User_Interface $item ) use ($router) {
	?>
	<?php if($router->getActionAllowed('edit')): ?>
		<a href="<?=$router->getActionURI('edit', $item);?>" class="btn btn-default btn-xs"><?=Tr::_('Edit');?></a>
	<?php endif; ?>
	&nbsp;
	<?php if($router->getActionAllowed('delete')): ?>
		<a href="<?=$router->getActionURI('delete', $item);?>" class="btn btn-danger btn-xs"><?=Tr::_('Delete');?></a>
	<?php endif; ?>
<?php
} );
$c_edit->setCssStyle( 'width:120px;' );

$grid->getColumn('login')->setDisplayCallback( function( Auth_User_Interface $item ) use ($router) {
	?>
	<?php if($router->getActionAllowed('edit')): ?>
		<a href="<?=$router->getActionURI('edit', $item);?>"><?=$item->getLogin();?></a>
	<?php else: ?>
		<a href="<?=$router->getActionURI('view', $item);?>"><?=$item->getLogin();?></a>
	<?php endif; ?>
<?php
} );

$grid->getColumn('ID')->setDisplayCallback( function( Auth_User_Interface $item ) {
	echo $item->getID();
} );


?>

<div style="padding: 10px;">

<?php if($router->getActionAllowed('add')): ?>
	<a href="<?=$router->getActionURI('add');?>" class="btn btn-primary"><?=Tr::_('Add new user');?></a>
<?php endif; ?>

<?=$grid->render();?>

</div>